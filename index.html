<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>あなたの適職診断 - 拡張版</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1, h2 {
            color: #4a4a4a;
            text-align: center;
        }
        .skill-category {
            margin-bottom: 20px;
        }
        .category-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.2em;
            color: #2c3e50;
        }
        .skill-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
        }
        .skill-item {
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            font-size: 0.9em;
        }
        .skill-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .skill-item.selected {
            color: white;
            font-weight: bold;
        }
        /* スキルカテゴリー別の色 */
        .communication { background-color: #ffcccb; }
        .communication.selected { background-color: #ff6b6b; }
        .technical { background-color: #bce6ff; }
        .technical.selected { background-color: #4dabf7; }
        .personal { background-color: #f5a2e3; }
        .personal.selected { background-color: #d82d96; }
        .management { background-color: #ffd8a8; }
        .management.selected { background-color: #ffa94d; }
        .cognitive { background-color: #d0bfff; }
        .cognitive.selected { background-color: #845ef7; }
        .creative { background-color: #ffd5e5; }
        .creative.selected { background-color: #ff8eb7; } 
        .marketing { background-color: #ffcccb; }
        .marketing.selected { background-color: #ff6b6b; }
        .businessKnowledge { background-color: #eca594; }
        .businessKnowledge.selected { background-color: #dd9037; }
        .interpersonal { background-color: #ffbcbc; }
        .interpersonal.selected { background-color: #f74da2; }

        #result {
            margin-top: 20px;
            padding: 20px;
            background-color: #e8f5e9;
            border-radius: 5px;
            display: none;
        }
        .job-result {
            margin-bottom: 20px;
            padding: 15px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        button {
            display: block;
            width: 200px;
            margin: 20px auto;
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>あなたの適職診断 - 拡張版</h1>
        <p>以下のスキルリストから、あなたが持っている、または興味のあるスキルを選んでください（複数選択可）：</p>
        <div id="skillCategories"></div>
        <button onclick="findMatchingJobs()">適職を診断する</button>
        <div id="result"></div>
    </div>

    <script>
        const skillCategories = {
  communication: { 
    name: "コミュニケーション系", 
    skills: [
      "コミュニケーション能力", 
      "交渉力", 
      "プレゼンテーションスキル", 
      "リーダーシップ", 
      "チームワーク", 
      "顧客理解"
    ] 
  },
  technical: { 
    name: "技術系", 
    skills: [
      "パソコンスキル", 
      "プログラミング", 
      "データ分析", 
      "ネットワーク管理", 
      "セキュリティ知識", 
      "クラウド技術", 
      "AI・機械学習"
    ] 
  },
  personal: { 
    name: "個人特性系", 
    skills: [
      "ストレス耐性", 
      "体力", 
      "適応力", 
      "継続的学習", 
      "自己管理能力", 
      "責任感", 
      "誠実性", 
      "積極性"
    ] 
  },
  management: { 
    name: "マネジメント系", 
    skills: [
      "組織力", 
      "時間管理", 
      "目標設定", 
      "リスク管理", 
      "マルチタスク能力", 
      "プロジェクト管理", 
      "人材育成", 
      "戦略立案", 
      "品質管理"
    ] 
  },
  cognitive: { 
    name: "思考系", 
    skills: [
      "問題解決能力", 
      "客観的判断思考", 
      "分析力", 
      "論理的思考", 
      "システム思考", 
      "戦略的思考"
    ] 
  },
  creative: { 
    name: "創造系", 
    skills: [
      "創造性", 
      "イノベーション力", 
      "デザイン思考", 
      "ビジュアライゼーション", 
      "アイデア創出"
    ] 
  },
  marketing: { 
    name: "マーケティング系", 
    skills: [
      "デジタル広告", 
      "SEO", 
      "コンテンツマーケティング", 
      "ソーシャルメディア運用",
      "市場調査", 
      "ブランド戦略", 
      "キャンペーン企画"
    ] 
  },
  businessKnowledge: { 
    name: "ビジネス知識系", 
    skills: [
      "ビジネス戦略", 
      "財務知識", 
      "マーケット分析", 
      "業界知識", 
      "経営管理"
    ] 
  },
  interpersonal: { 
    name: "対人関係系", 
    skills: [
      "共感力", 
      "傾聴力", 
      "協調性", 
      "ネットワーキング", 
      "文化的感受性",
      "柔軟性"
    ] 
  }
};

const jobs = [
    { 
        name: "営業職", 
        skills: ["コミュニケーション能力", "交渉力", "目標設定", "顧客理解", "プレゼンテーションスキル", "ストレス耐性", "積極性"],
        description: "製品やサービスを顧客に提案し、販売する役割。高いコミュニケーション能力と交渉力が求められます。",
        categories: ["communication", "management", "personal"]
    },
    { 
        name: "販売職", 
        skills: ["顧客理解", "コミュニケーション能力", "適応力", "ストレス耐性", "積極性", "チームワーク"],
        description: "顧客に対して商品やサービスを提供し、売上を上げる役割。顧客対応と柔軟な対応力が求められます。",
        categories: ["communication", "personal"]
    },
    { 
        name: "ルートセールス職", 
        skills: ["コミュニケーション能力", "顧客理解", "時間管理", "ストレス耐性", "適応力", "自己管理能力"],
        description: "既存顧客に定期的に訪問し、商品の販売やサービスの提供を行う役割。",
        categories: ["communication", "management", "personal"]
    },
    { 
        name: "営業事務職", 
        skills: ["パソコンスキル", "データ分析", "コミュニケーション能力", "時間管理", "マルチタスク能力", "組織力"],
        description: "営業チームのサポート業務を担当し、営業活動を効率的に進めるための事務作業を行います。",
        categories: ["technical", "management", "communication"]
    },
    { 
        name: "一般事務職", 
        skills: ["パソコンスキル", "時間管理", "コミュニケーション能力", "マルチタスク能力", "適応力", "組織力"],
        description: "一般的な事務作業を担当し、会社の業務を支える役割。基本的な事務スキルと管理能力が求められます。",
        categories: ["technical", "management", "personal"]
    },
    { 
        name: "不動産賃貸物件顧客サービス職", 
        skills: ["コミュニケーション能力", "顧客理解", "交渉力", "問題解決能力", "適応力", "ストレス耐性"],
        description: "不動産物件の賃貸に関する顧客対応を行い、顧客のニーズに応じたサービスを提供します。",
        categories: ["communication", "personal", "cognitive"]
    },
    { 
        name: "流通・小売系職", 
        skills: ["顧客理解", "コミュニケーション能力", "時間管理", "チームワーク", "適応力", "ストレス耐性"],
        description: "流通や小売業での商品販売や在庫管理を行い、顧客満足度を向上させる役割。",
        categories: ["communication", "management", "personal"]
    },
    { 
        name: "接客型金融職", 
        skills: ["コミュニケーション能力", "顧客理解", "プレゼンテーションスキル", "問題解決能力", "ストレス耐性", "適応力"],
        description: "金融商品やサービスを顧客に提供し、接客業務を通じて顧客満足度を高める役割。",
        categories: ["communication", "personal", "cognitive"]
    },
    { 
        name: "クリエイティブ系IT職", 
        skills: ["プログラミング", "デザイン思考", "創造性", "イノベーション力", "問題解決能力", "継続的学習"],
        description: "IT関連のクリエイティブな仕事を担当し、ソフトウェアやアプリケーションのデザイン・開発を行います。",
        categories: ["technical", "creative", "cognitive"]
    },
    { 
        name: "システム開発系IT職", 
        skills: ["プログラミング", "データ分析", "ネットワーク管理", "問題解決能力", "論理的思考", "チームワーク", "継続的学習"],
        description: "システムやアプリケーションの開発を担当し、技術的な問題解決を行います。",
        categories: ["technical", "cognitive", "communication"]
    },
    { 
        name: "公務員系職", 
        skills: ["組織力", "時間管理", "リーダーシップ", "問題解決能力", "誠実性", "コミュニケーション能力", "批判的思考"],
        description: "公的機関での業務を担当し、組織の運営や管理を行います。",
        categories: ["management", "personal", "cognitive"]
    },
    { 
        name: "物流系総合職", 
        skills: ["時間管理", "問題解決能力", "組織力", "リーダーシップ", "データ分析", "戦略立案"],
        description: "物流業務全般を担当し、効率的な物流システムの運用と管理を行います。",
        categories: ["management", "cognitive", "technical"]
    },
    { 
        name: "物流系現場職", 
        skills: ["体力", "時間管理", "チームワーク", "適応力", "ストレス耐性", "品質管理"],
        description: "物流センターなどの現場で、商品の仕分けや配送などを行います。",
        categories: ["personal", "management"]
    },
    { 
        name: "製造ライン系職", 
        skills: ["体力", "時間管理", "品質管理", "チームワーク", "適応力", "ストレス耐性"],
        description: "製造ラインでの作業を担当し、製品の品質管理や生産効率の向上に貢献します。",
        categories: ["personal", "management"]
    },
        { 
        name: "人材系派遣ワーカー", 
        skills: ["コミュニケーション能力", "適応力", "ストレス耐性", "チームワーク", "積極性", "継続的学習"],
        description: "派遣先での業務を担当し、迅速な適応と柔軟な対応が求められます。",
        categories: ["communication", "personal"]
    },
    { 
        name: "総合商社系職", 
        skills: ["交渉力", "コミュニケーション能力", "戦略立案", "問題解決能力", "適応力", "リーダーシップ", "データ分析"],
        description: "商社での営業や調達、取引先との交渉などを担当し、広範なビジネススキルが求められます。",
        categories: ["communication", "management", "cognitive"]
    },
    { 
        name: "専門商社系職", 
        skills: ["交渉力", "顧客理解", "市場調査", "問題解決能力", "プレゼンテーションスキル", "データ分析"],
        description: "特定の分野に特化した商社での営業や取引先との調整業務を担当します。",
        categories: ["communication", "marketing", "cognitive"]
    },
    { 
        name: "人材系総合職", 
        skills: ["コミュニケーション能力", "リーダーシップ", "戦略立案", "人材育成", "問題解決能力", "顧客理解", "分析力", "共感力", "傾聴力", "協調性"],
        description: "採用、教育・研修、人事制度の設計など、幅広い人材関連業務を担当します。",
        categories: ["communication", "management", "cognitive", "interpersonal"]
    },
    { 
        name: "一般的なコンサルタント職", 
        skills: ["問題解決能力", "分析力", "プレゼンテーションスキル", "ビジネス戦略", "コミュニケーション能力", "創造性", "客観的判断思考", "マーケット分析", "柔軟性"],
        description: "クライアント企業の経営課題を分析し、解決策を提案・実行支援する役割を担います。",
        categories: ["cognitive", "communication", "businessKnowledge", "creative", "interpersonal"]
    },
    { 
        name: "営業アシスタント職", 
        skills: ["コミュニケーション能力", "パソコンスキル", "時間管理", "組織力", "顧客理解", "適応力"],
        description: "営業担当者のサポート業務を行い、顧客対応や事務作業を担当します。入社しやすい仕事の一つです。",
        categories: ["communication", "technical", "management", "personal"]
    },
    { 
        name: "カスタマーサポート職", 
        skills: ["コミュニケーション能力", "問題解決能力", "共感力", "傾聴力", "ストレス耐性", "パソコンスキル"],
        description: "顧客からの問い合わせや苦情に対応し、製品やサービスのサポートを提供します。比較的入社しやすい職種です。",
        categories: ["communication", "cognitive", "interpersonal", "personal", "technical"]
    },
    { 
        name: "Web制作アシスタント職", 
        skills: ["パソコンスキル", "創造性", "適応力", "継続的学習", "チームワーク", "時間管理"],
        description: "Webデザイナーやエンジニアのサポート業務を行い、簡単なコーディングや画像編集などを担当します。IT業界への入門的な職種です。",
        categories: ["technical", "creative", "personal", "management"]
    }
];

        function displaySkills() {
            const skillCategoriesDiv = document.getElementById('skillCategories');
            for (let category in skillCategories) {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'skill-category';
                categoryDiv.innerHTML = `<div class="category-title">${skillCategories[category].name}</div>`;
                const skillListDiv = document.createElement('div');
                skillListDiv.className = 'skill-list';
                skillCategories[category].skills.forEach(skill => {
                    const skillItem = document.createElement('div');
                    skillItem.className = `skill-item ${category}`;
                    skillItem.textContent = skill;
                    skillItem.onclick = function() {
                        this.classList.toggle('selected');
                    };
                    skillListDiv.appendChild(skillItem);
                });
                categoryDiv.appendChild(skillListDiv);
                skillCategoriesDiv.appendChild(categoryDiv);
            }
        }

        function findMatchingJobs() {
            const selectedSkills = Array.from(document.querySelectorAll('.skill-item.selected')).map(item => item.textContent);
            const matchingJobs = jobs.map(job => {
                const matchingSkillsCount = job.skills.filter(skill => selectedSkills.includes(skill)).length;
                const totalSelectedSkills = selectedSkills.length;
                // スキルのマッチ率と選択されたスキルの数を考慮してスコアを計算
                const score = (matchingSkillsCount / job.skills.length) * (matchingSkillsCount / totalSelectedSkills) * 100;
                return { ...job, matchPercentage: score };
            }).sort((a, b) => b.matchPercentage - a.matchPercentage);

            displayResults(matchingJobs.slice(0, 5));
        }

        function displaySkills() {
    const skillCategoriesDiv = document.getElementById('skillCategories');
    for (let category in skillCategories) {
        const categoryDiv = document.createElement('div');
        categoryDiv.className = 'skill-category';
        categoryDiv.innerHTML = `<div class="category-title">${skillCategories[category].name}</div>`;
        const skillListDiv = document.createElement('div');
        skillListDiv.className = 'skill-list';
        skillCategories[category].skills.forEach(skill => {
            const skillItem = document.createElement('div');
            skillItem.className = `skill-item ${category}`;
            skillItem.textContent = skill;
            skillItem.onclick = function() {
                this.classList.toggle('selected');
            };
            skillListDiv.appendChild(skillItem);
        });
        categoryDiv.appendChild(skillListDiv);
        skillCategoriesDiv.appendChild(categoryDiv);
    }
}

function findMatchingJobs() {
    const selectedSkills = Array.from(document.querySelectorAll('.skill-item.selected')).map(item => item.textContent);
    const matchingJobs = jobs.map(job => {
        const matchingSkillsCount = job.skills.filter(skill => selectedSkills.includes(skill)).length;
        const jobSkillsCount = job.skills.length;
        const selectedSkillsCount = selectedSkills.length;
        
        // スキルのマッチ率を計算（職業が必要とするスキルのうち、ユーザーが持つスキルの割合）
        const matchRate = matchingSkillsCount / jobSkillsCount;
        
        // ユーザーが選択したスキルのうち、職業に関連するスキルの割合
        const relevanceRate = matchingSkillsCount / selectedSkillsCount;
        
        // 総合スコアの計算（マッチ率と関連率の調和平均）
        const score = 2 / (1/matchRate + 1/relevanceRate) * 100;
        
        return { ...job, matchPercentage: score, matchingSkillsCount, jobSkillsCount };
    }).sort((a, b) => b.matchPercentage - a.matchPercentage);

    displayResults(matchingJobs.slice(0, 5));
}

function findMatchingJobs() {
    const selectedSkills = Array.from(document.querySelectorAll('.skill-item.selected')).map(item => item.textContent);
    const matchingJobs = jobs.map(job => {
        const matchingSkillsCount = job.skills.filter(skill => selectedSkills.includes(skill)).length;
        const jobSkillsCount = job.skills.length;
        const selectedSkillsCount = selectedSkills.length;
        
        // スキルのマッチ率を計算（職業が必要とするスキルのうち、ユーザーが持つスキルの割合）
        const matchRate = matchingSkillsCount / jobSkillsCount;
        
        // ユーザーが選択したスキルのうち、職業に関連するスキルの割合
        const relevanceRate = matchingSkillsCount / selectedSkillsCount;
        
        // カテゴリーマッチ度を計算
        const userCategories = new Set(selectedSkills.flatMap(skill => 
            Object.entries(skillCategories).filter(([_, cat]) => cat.skills.includes(skill)).map(([key, _]) => key)
        ));
        const categoryMatchRate = job.categories.filter(cat => userCategories.has(cat)).length / job.categories.length;
        
        // 職種の入社のしやすさを考慮（新しく追加した職種にボーナスを与える）
        const entryLevelBonus = ["営業アシスタント職", "カスタマーサポート職", "Web制作アシスタント職"].includes(job.name) ? 0.1 : 0;
        
        // 総合スコアの計算（マッチ率、関連率、カテゴリーマッチ度、入社のしやすさの重み付け平均）
        const score = (matchRate * 0.35 + relevanceRate * 0.25 + categoryMatchRate * 0.3 + entryLevelBonus * 0.1) * 100;
        
        return { 
            ...job, 
            matchPercentage: score, 
            matchingSkillsCount, 
            jobSkillsCount,
            categoryMatchRate
        };
    }).sort((a, b) => b.matchPercentage - a.matchPercentage);

    displayResults(matchingJobs.slice(0, 5));
}

function displayResults(matchingJobs) {
    const resultDiv = document.getElementById('result');
    resultDiv.innerHTML = '<h2>あなたにおすすめの職業</h2>';
    matchingJobs.forEach(job => {
        const matchingSkills = job.skills.filter(skill => 
            Array.from(document.querySelectorAll('.skill-item.selected')).map(item => item.textContent).includes(skill)
        );
        const missingSkills = job.skills.filter(skill => !matchingSkills.includes(skill));
        
        resultDiv.innerHTML += `
            <div class="job-result">
                <h3>${job.name} (マッチ度: ${job.matchPercentage.toFixed(1)}%)</h3>
                <p>${job.description}</p>
                <p><strong>マッチしたスキル (${job.matchingSkillsCount}/${job.jobSkillsCount}):</strong> ${matchingSkills.join(', ')}</p>
                <p><strong>さらに伸ばすとよいスキル:</strong> ${missingSkills.join(', ')}</p>
                <p><strong>関連する分野:</strong> ${job.categories.map(cat => skillCategories[cat].name).join(', ')}</p>
                <p><strong>分野マッチ度:</strong> ${(job.categoryMatchRate * 100).toFixed(1)}%</p>
            </div>
        `;
    });
    resultDiv.style.display = 'block';
}

window.onload = displaySkills;
    </script>
</body>
</html>